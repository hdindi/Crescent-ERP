(function(b){b.Zebra_Dialog=function(g,l){var r={animation_speed:250,auto_close:!1,buttons:!0,custom_class:!1,keyboard:!0,message:"",modal:!0,overlay_close:!0,overlay_opacity:0.9,position:"center",title:"",type:"information",vcenter_short_message:!0,width:0,onClose:null},a=this;a.settings={};options={};"string"==typeof g&&(options.message=g);if("object"==typeof g||"object"==typeof l)options=b.extend(options,"object"==typeof g?g:l);a.init=function(){a.settings=b.extend({},r,options);a.isIE6="explorer"== j.name&&6==j.version||!1;a.settings.modal&&(a.overlay=jQuery("<div>",{"class":"ZebraDialogOverlay"}).css({position:a.isIE6?"absolute":"fixed",left:0,top:0,opacity:a.settings.overlay_opacity,"z-index":1E3}),a.settings.overlay_close&&a.overlay.bind("click",function(){a.close()}),a.overlay.appendTo("body"));a.dialog=jQuery("<div>",{"class":"ZebraDialog"+(a.settings.custom_class?" "+a.settings.custom_class:"")}).css({position:a.isIE6?"absolute":"fixed",left:0,top:0,"z-index":1001,visibility:"hidden"}); !a.settings.buttons&&a.settings.auto_close&&a.dialog.attr("id","ZebraDialog_"+Math.floor(9999999*Math.random()));var c=parseInt(a.settings.width);!isNaN(c)&&(c==a.settings.width&&c.toString()==a.settings.width.toString()&&0<c)&&a.dialog.css({width:a.settings.width});a.settings.title&&jQuery("<h3>",{"class":"ZebraDialog_Title"}).html(a.settings.title).appendTo(a.dialog);a.message=jQuery("<div>",{"class":"ZebraDialog_Body"+(""!=m()?" ZebraDialog_Icon ZebraDialog_"+m():"")});a.settings.vcenter_short_message? jQuery("<div>").html(a.settings.message).appendTo(a.message):a.message.html(a.settings.message);a.message.appendTo(a.dialog);if(!0!==a.settings.buttons&&!b.isArray(a.settings.buttons))c=!1;else{if(!0===a.settings.buttons)switch(a.settings.type){case "question":a.settings.buttons=["Yes","No"];break;default:a.settings.buttons=["Ok"]}c=a.settings.buttons.reverse()}if(c){var d=jQuery("<div>",{"class":"ZebraDialog_Buttons"}).appendTo(a.dialog);b.each(c,function(c,e){var h=jQuery("<a>",{href:"javascript:void(0)", "class":"ZebraDialog_Button"+c});b.isPlainObject(e)?h.html(e.caption):h.html(e);h.bind("click",function(){void 0!=e.callback&&e.callback(a.dialog);a.close(void 0!=e.caption?e.caption:e)});h.appendTo(d)});jQuery("<div>",{style:"clear:both"}).appendTo(d)}a.dialog.appendTo("body");b(window).bind("resize",k);a.settings.keyboard&&b(document).bind("keyup",n);a.isIE6&&b(window).bind("scroll",p);!1!==a.settings.auto_close&&(a.dialog.bind("click",function(){clearTimeout(a.timeout);a.close()}),a.timeout=setTimeout(a.close, a.settings.auto_close));k();return a};a.close=function(c){a.settings.keyboard&&b(document).unbind("keyup",n);a.isIE6&&b(window).unbind("scroll",p);b(window).unbind("resize",k);a.overlay&&a.overlay.animate({opacity:0},a.settings.animation_speed,function(){a.overlay.remove()});a.dialog.animate({top:0,opacity:0},a.settings.animation_speed,function(){a.dialog.remove();if(a.settings.onClose&&"function"==typeof a.settings.onClose)a.settings.onClose(void 0!=c?c:"")})};var k=function(){var c=b(window).width(), d=b(window).height(),f=a.dialog.width(),e=a.dialog.height(),f={left:0,top:0,right:c-f,bottom:d-e,center:(c-f)/2,middle:(d-e)/2};a.dialog_left=void 0;a.dialog_top=void 0;a.settings.modal&&a.overlay.css({width:c,height:d});b.isArray(a.settings.position)&&(2==a.settings.position.length&&"string"==typeof a.settings.position[0]&&a.settings.position[0].match(/^(left|right|center)[\s0-9\+\-]*$/)&&"string"==typeof a.settings.position[1]&&a.settings.position[1].match(/^(top|bottom|middle)[\s0-9\+\-]*$/))&& (a.settings.position[0]=a.settings.position[0].toLowerCase(),a.settings.position[1]=a.settings.position[1].toLowerCase(),b.each(f,function(c,d){for(var b=0;2>b;b++){var e=a.settings.position[b].replace(c,d);e!=a.settings.position[b]&&(0==b?a.dialog_left=eval(e):a.dialog_top=eval(e))}}));if(void 0==a.dialog_left||void 0==a.dialog_top)a.dialog_left=f.center,a.dialog_top=f.middle;a.settings.vcenter_short_message&&(c=a.message.find("div:first"),d=c.height(),f=a.message.height(),d<f&&c.css({"margin-top":(f- d)/2}));a.dialog.css({left:a.dialog_left,top:a.dialog_top,visibility:"visible"});a.dialog.find("a[class^=ZebraDialog_Button]:first").focus();a.isIE6&&setTimeout(q,500)},q=function(){var c=b(window).scrollTop(),d=b(window).scrollLeft();a.settings.modal&&a.overlay.css({top:c,left:d});a.dialog.css({left:a.dialog_left+d,top:a.dialog_top+c})},m=function(){switch(a.settings.type){case "confirmation":case "error":case "information":case "question":case "warning":return a.settings.type.charAt(0).toUpperCase()+ a.settings.type.slice(1).toLowerCase();default:return!1}},n=function(c){27==c.which&&a.close();return!0},p=function(){q()},j={init:function(){this.name=this.searchString(this.dataBrowser)||"";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||""},searchString:function(a){for(var d=0;d<a.length;d++){var b=a[d].string,e=a[d].prop;this.versionSearchString=a[d].versionSearch||a[d].identity;if(b){if(-1!=b.indexOf(a[d].subString))return a[d].identity}else if(e)return a[d].identity}}, searchVersion:function(a){var b=a.indexOf(this.versionSearchString);if(-1!=b)return parseFloat(a.substring(b+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"MSIE",identity:"explorer",versionSearch:"MSIE"}]};j.init();return a.init()}})(jQuery);